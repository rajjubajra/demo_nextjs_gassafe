(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{9559:function(e,t,n){Promise.resolve().then(n.bind(n,681))},681:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var i=n(7437),l=n(5491),d=n(2333),r=n(9505);let o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return fetch(...t).then(e=>e.json())};var s=n(1552),a=n(6691),u=n.n(a),c=n(2265),f=e=>{let{data:t,id:n}=e,[l,d]=(0,c.useState)("");return(0,c.useEffect)(()=>{var e;let i=t&&(null==t?void 0:null===(e=t.included)||void 0===e?void 0:e.findIndex(e=>e.id===n));console.log(i);let l=t&&(null==t?void 0:t.included[i]);console.log("Included data: ",l),d(r.g.URL+(null==l?void 0:l.attributes.uri.url))},[t,n]),(0,i.jsx)("div",{children:(0,i.jsx)("button",{onClick:()=>{let e=window.open("","","width=600,height=600");e.document.open(),e.document.write("<html><body>"),e.document.write('<img src="'.concat(l,'" alt="Printed Image" />')),e.document.write("</body></html>"),e.document.close(),e.print(),e.close()},children:"Print Image"})})};function v(){var e;let{username:t,isLoading:n}=(0,l.C)(),{data:a,error:c,isLoading:v}=function(){let e=r.g.URL+"/jsonapi/node/gas_safe_certificate?include=field_image",{data:t,error:n,isLoading:i}=(0,d.ZP)(e,o);return{data:t,error:n,isLoading:i}}();console.log("data",a,"error",c,"loading",v);let h=e=>{let t=new Date(e),n=t.getFullYear()+1,i=t.getMonth()+1,l=t.getDate()-1;return"".concat(n,"-").concat(i,"-").concat(l)};return v&&n?(0,i.jsx)(s.Z,{}):(0,i.jsxs)("main",{className:"flex min-h-screen flex-col items-center font-light",children:[(0,i.jsxs)("div",{className:"uppercase text-sm my-10",children:["Name: ",t]}),a&&(null==a?void 0:null===(e=a.data)||void 0===e?void 0:e.map(e=>(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"uppercase text-sm",children:[(0,i.jsxs)("div",{children:["Title: ",e.attributes.title]}),(0,i.jsxs)("div",{children:["Checked Date: ",e.attributes.field_date]}),(0,i.jsxs)("div",{children:["Next due date: ",h(e.attributes.field_date)]})]}),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsx)(u(),{className:"md:w-96 w-full md:h-72 h-40 p-2 my-10 border",src:function(e){let t=a&&(null==a?void 0:a.included.findIndex(t=>t.id===e));console.log(t);let n=a&&(null==a?void 0:a.included[t]);return r.g.URL+(null==n?void 0:n.attributes.uri.url)}(e.relationships.field_image.data.id),height:300,width:300,alt:"gassafe"})}),(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"w-48 px-6 py-2 group flex cursor-pointer hover:shadow-none shadow-md duration-500",children:[(0,i.jsx)("span",{className:"group-hover:rotate-90 rounded-sm block w-4 h-4 bg-red-500 duration-700 mt-1 mr-2"}),(0,i.jsx)(f,{id:e.relationships.field_image.data.id,data:a})]})})]},e.id)))]})}},1552:function(e,t,n){"use strict";var i=n(7437);n(2265),t.Z=function(){return(0,i.jsx)("div",{className:"w-full h-screen flex justify-center items-center",children:"Loading..."})}},9505:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});let i={URL:"https://demo.yellow-website.com"}},5491:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var i=n(2265),l=n(2333),d=n(9505);let r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return fetch(...t).then(e=>e.json())},o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return fetch(...t).then(e=>e.json())};function s(){let[e,t]=(0,i.useState)(""),{loggedInUserId:n}=function(){let[e,t]=(0,i.useState)(),n=d.g.URL+"/jsonapi",{data:o,error:s,isLoading:a}=(0,l.ZP)(n,r);return(0,i.useEffect)(()=>{var e,n,i,l;o&&t(null==o?void 0:null===(l=o.meta)||void 0===l?void 0:null===(i=l.links)||void 0===i?void 0:null===(n=i.me)||void 0===n?void 0:null===(e=n.meta)||void 0===e?void 0:e.id)},[o]),{loggedInUserId:e}}(),s=d.g.URL+"/jsonapi/user/user/"+n,{data:a,error:u,isLoading:c}=(0,l.ZP)(s,o);return(0,i.useEffect)(()=>{var e,n;let i=a&&(null==a?void 0:null===(n=a.data)||void 0===n?void 0:null===(e=n.attributes)||void 0===e?void 0:e.name);i&&t(i)},[a]),{username:e,isLoading:c}}}},function(e){e.O(0,[189,691,971,596,744],function(){return e(e.s=9559)}),_N_E=e.O()}]);