(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{9559:function(e,n,t){Promise.resolve().then(t.bind(t,681))},681:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return v}});var i=t(7437),l=t(5491),d=t(2333),r=t(9505);let o=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return fetch(...n).then(e=>e.json())};var u=t(1552),s=t(6691),a=t.n(s),c=t(2265),f=e=>{let{data:n,id:t}=e,[l,d]=(0,c.useState)("");return(0,c.useEffect)(()=>{let e=n&&(null==n?void 0:n.included.findIndex(e=>e.id===t));console.log(e);let i=n&&(null==n?void 0:n.included[e]);console.log("Included data: ",i),d(r.g.URL+(null==i?void 0:i.attributes.uri.url))},[n,t]),(0,i.jsx)("div",{children:(0,i.jsx)("button",{onClick:()=>{let e=window.open("","","width=600,height=600");e.document.open(),e.document.write("<html><body>"),e.document.write('<img src="'.concat(l,'" alt="Printed Image" />')),e.document.write("</body></html>"),e.document.close(),e.print(),e.close()},children:"Print Image"})})};function v(){var e;let{username:n,isLoading:t}=(0,l.C)(),{data:s,error:c,isLoading:v}=function(){let e=r.g.URL+"/jsonapi/node/gas_safe_certificate?include=field_image",{data:n,error:t,isLoading:i}=(0,d.ZP)(e,o);return{data:n,error:t,isLoading:i}}();return(console.log("data",s,"error",c,"loading",v),v&&t)?(0,i.jsx)(u.Z,{}):(0,i.jsxs)("main",{className:"flex min-h-screen flex-col justify-center p-24",children:[(0,i.jsxs)("div",{children:["Name: ",(0,i.jsx)("span",{className:"capitalize",children:n})]}),s&&(null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.map(e=>(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{children:["Title: ",e.attributes.title]}),(0,i.jsx)("div",{children:"Checked Date: [date]"}),(0,i.jsx)("div",{children:"Next due date: [date]"}),(0,i.jsx)("div",{children:(0,i.jsx)(a(),{className:"w-96 h-auto p-2 m-2",src:function(e){let n=s&&(null==s?void 0:s.included.findIndex(n=>n.id===e));console.log(n);let t=s&&(null==s?void 0:s.included[n]);return r.g.URL+(null==t?void 0:t.attributes.uri.url)}(e.relationships.field_image.data.id),height:300,width:300,alt:"gassafe"})}),(0,i.jsx)("div",{children:(0,i.jsx)(f,{id:e.relationships.field_image.data.id,data:s})})]},e.id)))]})}},1552:function(e,n,t){"use strict";var i=t(7437);t(2265),n.Z=function(){return(0,i.jsx)("div",{className:"w-full h-screen flex justify-center items-center",children:"Loading..."})}},9505:function(e,n,t){"use strict";t.d(n,{g:function(){return i}});let i={URL:"https://demo.yellow-website.com"}},5491:function(e,n,t){"use strict";t.d(n,{C:function(){return u}});var i=t(2265),l=t(2333),d=t(9505);let r=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return fetch(...n).then(e=>e.json())},o=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return fetch(...n).then(e=>e.json())};function u(){let[e,n]=(0,i.useState)(""),{loggedInUserId:t}=function(){let[e,n]=(0,i.useState)(),t=d.g.URL+"/jsonapi",{data:o,error:u,isLoading:s}=(0,l.ZP)(t,r);return(0,i.useEffect)(()=>{var e,t,i,l;o&&n(null==o?void 0:null===(l=o.meta)||void 0===l?void 0:null===(i=l.links)||void 0===i?void 0:null===(t=i.me)||void 0===t?void 0:null===(e=t.meta)||void 0===e?void 0:e.id)},[o]),{loggedInUserId:e}}(),u=d.g.URL+"/jsonapi/user/user/"+t,{data:s,error:a,isLoading:c}=(0,l.ZP)(u,o);return(0,i.useEffect)(()=>{var e,t;let i=s&&(null==s?void 0:null===(t=s.data)||void 0===t?void 0:null===(e=t.attributes)||void 0===e?void 0:e.name);i&&n(i)},[s]),{username:e,isLoading:c}}}},function(e){e.O(0,[189,691,971,596,744],function(){return e(e.s=9559)}),_N_E=e.O()}]);